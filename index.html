<!-- Firebase SDK (Stable Version) -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyA-GttbP1ggsx00ecBW_TKLhUIMQugsb-A",
    authDomain: "pvt-chat-76fc4.firebaseapp.com",
    projectId: "pvt-chat-76fc4",
    storageBucket: "pvt-chat-76fc4.firebasestorage.app",
    messagingSenderId: "1067226039088",
    appId: "1:1067226039088:web:7c841ede69cb245a72fef5"
  };

  firebase.initializeApp(firebaseConfig);
  var db = firebase.firestore();

  var correctPassword = "iloveyou";

  function checkPassword() {
    var input = document.getElementById("password").value;
    if (input === correctPassword) {
      document.getElementById("loginBox").classList.add("hidden");
      document.getElementById("chatBox").classList.remove("hidden");
      loadMessages();
    } else {
      document.getElementById("error").innerText = "Wrong secret ðŸ˜¢";
    }
  }

  function sendMessage() {
    var username = document.getElementById("username").value;
    var message = document.getElementById("messageInput").value;

    if (username && message) {
      db.collection("messages").add({
        user: username,
        text: message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
      });
      document.getElementById("messageInput").value = "";
    }
  }

  function loadMessages() {
    db.collection("messages")
      .orderBy("timestamp")
      .onSnapshot(function(snapshot) {
        var messagesDiv = document.getElementById("messages");
        messagesDiv.innerHTML = "";

        snapshot.forEach(function(doc) {
          var data = doc.data();
          var div = document.createElement("div");
          div.classList.add("msg");
          div.innerHTML = "<strong>" + data.user + ":</strong> " + data.text;
          messagesDiv.appendChild(div);
        });
      });
  }
</script>
